# üçå Google Nano Banana API Integration for berrry.app

**Hackathon Submission**: Integration of Google's Nano Banana (Gemini 2.5 Flash Image) API that turns any web app into a visual experience with 3 lines of code.

## üéØ What This Is

This project showcases a **production-ready integration** of **Google's Nano Banana API** (Gemini 2.5 Flash Image model) into [berrry.app](https://berrry.app). It demonstrates how modern AI image generation can be seamlessly embedded into existing web applications with zero JavaScript required.

### ‚ö° Key Innovation

**Direct `<img>` tag compatibility** - No JavaScript, no SDKs, no complex integration:

```html
<!-- This just works -->
<img src="/api/nanobanana/image/512/512?prompt=wizard+in+purple+robes" />
```

## üöÄ What Makes This Integration Special

### 1. **Zero-Friction Integration**
- Works in plain HTML `<img>` tags
- CSS `background-image` URLs
- Direct browser requests
- No authentication required for basic usage

### 2. **Production-Grade Performance**
- **Intelligent caching** with PostgreSQL LOB storage
- **Fallback system** - apps never break when AI is down
- **Cost optimization** through content deduplication
- **Rate limiting** and error handling

### 3. **Real-World Usage**
This isn't a demo - it's **live in production** on berrry.app with:
- **14+ successful generations** from real users
- **Multiple demo apps** using the API
- **Cache hit rates** reducing API costs
- **Fallback images** ensuring 100% uptime

## üìÅ Repository Contents

### Core Implementation
- **`src/nanobanana-service.js`** - Google Nano Banana API client with validation
- **`src/nanobanana-routes.js`** - Koa.js routes supporting GET/POST endpoints  
- **`src/image-generation-cache.js`** - PostgreSQL LOB caching system
- **`migrations/053_add_nanobanana_support.sql`** - Database schema

### Production Data
- **`demos/generated-images/`** - Real images generated by users
- **`demos/demo-data.json`** - Usage statistics and metrics
- **`demos/api-examples.md`** - Production API usage examples

### Tests & Documentation
- **`tests/`** - Comprehensive test suite with mocked Gemini API
- **`API_REFERENCE.md`** - Complete API documentation
- **`docs/ARCHITECTURE.md`** - Technical implementation details

## üé® Live Demo Examples

### Basic Generation (GET)
```html
<img src="/api/nanobanana/image/512/512?prompt=cyberpunk+city+skyline" />
<img src="/api/nanobanana/image/768/768?prompt=magical+forest+glowing+mushrooms" />
```

### Advanced Features (POST)
```javascript
// Image editing with file upload
const formData = new FormData();
formData.append('prompt', 'make the sky purple with dragons');
formData.append('base_image', imageFile);
formData.append('strength', '0.8');

fetch('/api/nanobanana/image', { method: 'POST', body: formData });
```

### CSS Integration
```css
.hero-bg {
  background-image: url('/api/nanobanana/image/1920/1080?prompt=sunset+over+mountains');
}
```

## üéØ Live Demo Apps

**Real production apps** using Google's Nano Banana API in the wild:

### [memeyourself.berrry.app](https://memeyourself.berrry.app) 
AI meme generator that puts your face into popular meme templates
- **Files**: [demos/apps/memeyourself/](demos/apps/memeyourself/)
- **Usage**: Direct API calls for meme generation

### [thisfinebanana.berrry.app](https://thisfinebanana.berrry.app)
Developer humor app generating "This is Fine" style images with banana characters  
- **Files**: [demos/apps/thisfinebanana/](demos/apps/thisfinebanana/)
- **Usage**: Dynamic prompt generation with size options

### [imagemagic.berrry.app](https://imagemagic.berrry.app)  
Image generation platform with multiple AI providers
- **Files**: [demos/apps/imagemagic/](demos/apps/imagemagic/)
- **Usage**: Advanced features with multiple API endpoints

## üõ† Technical Architecture

### API Design
- **GET endpoints** for direct `<img>` usage
- **POST endpoints** for advanced features (editing, composition)
- **Automatic caching** with SHA256 deduplication
- **Graceful fallbacks** when API is unavailable

### Database Integration
```sql
-- Images stored as PostgreSQL Large Objects
SELECT lo_get(content_oid) FROM image_generations 
WHERE provider = 'nanobanana' AND success = true;
```

### Provider-Agnostic Design
The system supports multiple image generation providers:
- **nanobanana** (Google's Nano Banana - Gemini 2.5 Flash Image)  
- **retrodiffusion** (existing provider)
- Easy to add new providers

## üéØ Hackathon Value Proposition

### For Developers
- **3-line integration** - Just use an `<img>` tag
- **No API keys required** for basic usage
- **Production-ready** caching and error handling
- **Works everywhere** - HTML, CSS, any framework

### For Users
- **Instant visual content** in any web app
- **High-quality results** from Google's Nano Banana API
- **Fast responses** thanks to intelligent caching
- **Never breaks** with robust fallback system

### For Businesses  
- **Cost-effective** through caching and deduplication
- **Scalable** PostgreSQL LOB storage
- **Measurable** with built-in analytics
- **Reliable** 24/7 uptime with fallbacks

## üé¨ Demo Walkthrough

1. **Live Apps** - Visit [memeyourself.berrry.app](https://memeyourself.berrry.app), [thisfinebanana.berrry.app](https://thisfinebanana.berrry.app), [imagemagic.berrry.app](https://imagemagic.berrry.app)
2. **View Source** - See real nanobanana API usage in [demos/apps/](demos/apps/)
3. **Simple Integration** - `<img src="/api/nanobanana/image/512/512?prompt=wizard+in+space" />`
4. **Advanced Features** - POST requests with file uploads and editing
5. **Production Ready** - Caching, error handling, fallback systems

## üèÜ Why This Wins

### ‚úÖ **Actually Works**
Not a prototype - this is **live in production** with real users and real data.

### ‚úÖ **Developer Experience**
Zero-friction integration that "just works" in any web context.

### ‚úÖ **Production Ready**
Built for scale with caching, error handling, and cost optimization.

### ‚úÖ **Real Innovation**
Direct `<img>` tag compatibility is a game-changer for AI image generation APIs.

### ‚úÖ **Measurable Impact**
Real metrics from production usage prove the concept works.

---

## üîß Quick Start

```bash
# Extract this repository  
./scripts/extract-nanobanana-with-git-filter.sh

# Collect production demo data
node scripts/collect-demo-data.js

# View the magic
open demos/api-examples.md
```

**Built for the hackathon, proven in production.** üöÄ

---

*This submission showcases a real, working integration of Google's Nano Banana API (Gemini 2.5 Flash Image) into a production web application, demonstrating both technical excellence and practical value.*