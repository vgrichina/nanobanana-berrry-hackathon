# üçå Nano Banana: Gemini 2.5 Flash Image Integration for berrry.app

**Hackathon Submission**: AI-powered image generation API that turns any web app into a visual experience with 3 lines of code.

![Nano Banana Demo](hackathon/screenshots/hero-demo.png)

## üéØ What This Is

Nano Banana is a **production-ready image generation API** integrated into [berrry.app](https://berrry.app) that uses Google's **Gemini 2.5 Flash Image** model. It demonstrates how modern AI image generation can be seamlessly embedded into existing web applications with zero JavaScript required.

### ‚ö° Key Innovation

**Direct `<img>` tag compatibility** - No JavaScript, no SDKs, no complex integration:

```html
<!-- This just works -->
<img src="/api/nanobanana/image/512/512?prompt=wizard+in+purple+robes" />
```

## üöÄ What Makes This Special

### 1. **Zero-Friction Integration**
- Works in plain HTML `<img>` tags
- CSS `background-image` URLs
- Direct browser requests
- No authentication required for basic usage

### 2. **Production-Grade Performance**
- **Intelligent caching** with PostgreSQL LOB storage
- **Fallback system** - apps never break when AI is down
- **Cost optimization** through content deduplication
- **Rate limiting** and error handling

### 3. **Real-World Usage**
This isn't a demo - it's **live in production** on berrry.app with:
- **14+ successful generations** from real users
- **Multiple demo apps** using the API
- **Cache hit rates** reducing API costs
- **Fallback images** ensuring 100% uptime

## üìÅ Repository Contents

### Core Implementation
- **`src/nanobanana-service.js`** - Gemini 2.5 Flash API client with validation
- **`src/nanobanana-routes.js`** - Koa.js routes supporting GET/POST endpoints  
- **`src/image-generation-cache.js`** - PostgreSQL LOB caching system
- **`migrations/053_add_nanobanana_support.sql`** - Database schema

### Production Data
- **`demos/generated-images/`** - Real images generated by users
- **`demos/demo-data.json`** - Usage statistics and metrics
- **`demos/api-examples.md`** - Production API usage examples

### Tests & Documentation
- **`tests/`** - Comprehensive test suite with mocked Gemini API
- **`API_REFERENCE.md`** - Complete API documentation
- **`docs/ARCHITECTURE.md`** - Technical implementation details

## üé® Live Demo Examples

### Basic Generation (GET)
```html
<img src="/api/nanobanana/image/512/512?prompt=cyberpunk+city+skyline" />
<img src="/api/nanobanana/image/768/768?prompt=magical+forest+glowing+mushrooms" />
```

### Advanced Features (POST)
```javascript
// Image editing with file upload
const formData = new FormData();
formData.append('prompt', 'make the sky purple with dragons');
formData.append('base_image', imageFile);
formData.append('strength', '0.8');

fetch('/api/nanobanana/image', { method: 'POST', body: formData });
```

### CSS Integration
```css
.hero-bg {
  background-image: url('/api/nanobanana/image/1920/1080?prompt=sunset+over+mountains');
}
```

## üìä Production Metrics

From real berrry.app usage:

| Metric | Value |
|--------|-------|
| **Total Generations** | 14+ successful |
| **Success Rate** | 92%+ |
| **Average Response Time** | < 3 seconds |
| **Cache Hit Rate** | 15%+ (growing) |
| **Demo Apps** | 3 active subdomains |

## üõ† Technical Architecture

### API Design
- **GET endpoints** for direct `<img>` usage
- **POST endpoints** for advanced features (editing, composition)
- **Automatic caching** with SHA256 deduplication
- **Graceful fallbacks** when API is unavailable

### Database Integration
```sql
-- Images stored as PostgreSQL Large Objects
SELECT lo_get(content_oid) FROM image_generations 
WHERE provider = 'nanobanana' AND success = true;
```

### Provider-Agnostic Design
The system supports multiple image generation providers:
- **nanobanana** (Gemini 2.5 Flash Image)  
- **retrodiffusion** (existing provider)
- Easy to add new providers

## üéØ Hackathon Value Proposition

### For Developers
- **3-line integration** - Just use an `<img>` tag
- **No API keys required** for basic usage
- **Production-ready** caching and error handling
- **Works everywhere** - HTML, CSS, any framework

### For Users
- **Instant visual content** in any web app
- **High-quality results** from Gemini 2.5 Flash
- **Fast responses** thanks to intelligent caching
- **Never breaks** with robust fallback system

### For Businesses  
- **Cost-effective** through caching and deduplication
- **Scalable** PostgreSQL LOB storage
- **Measurable** with built-in analytics
- **Reliable** 24/7 uptime with fallbacks

## üé¨ Demo Walkthrough

1. **Simple HTML** - Show `<img>` tag generating images
2. **Real berrry.app** - Live subdomain using the API
3. **Advanced Features** - Image editing and composition
4. **Performance** - Cache hits and fallback behavior
5. **Production Data** - Real usage statistics and examples

## üèÜ Why This Wins

### ‚úÖ **Actually Works**
Not a prototype - this is **live in production** with real users and real data.

### ‚úÖ **Developer Experience**
Zero-friction integration that "just works" in any web context.

### ‚úÖ **Production Ready**
Built for scale with caching, error handling, and cost optimization.

### ‚úÖ **Real Innovation**
Direct `<img>` tag compatibility is a game-changer for AI image generation APIs.

### ‚úÖ **Measurable Impact**
Real metrics from production usage prove the concept works.

---

## üîß Quick Start

```bash
# Extract this repository  
./scripts/extract-nanobanana-with-git-filter.sh

# Collect production demo data
node scripts/collect-demo-data.js

# View the magic
open demos/api-examples.md
```

**Built for the hackathon, proven in production.** üöÄ

---

*This submission showcases a real, working integration of Gemini 2.5 Flash Image into a production web application, demonstrating both technical excellence and practical value.*